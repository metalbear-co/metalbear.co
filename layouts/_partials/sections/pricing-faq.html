{{- $site := .Site }}
{{- $section := .section }}
{{ with $section }}
<div class="bg-[#FAFAFD] border-b-3">
    <div
        class="container w-full sm:max-w-full lg:max-w-screen-lg xl:max-w-screen-xl mx-auto px-6 xl:px-0 pt-13 xl:pt-16 pb-20 xl:pb-25">
        <header class="text-center mb-12 xl:mb-14">
            <h3 class="text-black text-3xl xl:text-[2rem] font-body font-bold">
                Frequently asked questions</h3>
        </header>
        <div x-data="{ open: [] }" class="lg:w-[90%] lg:mx-auto">
            {{- $lastIndex := sub (len .questions) 1 }}
            {{- range $index, $qa := .questions }}
            <div class="border-b border-[#E4E3FD]" :class="{ 'border-none': {{ $index }} === {{ $lastIndex }} }">
                <div class="flex justify-between space-x-6 cursor-pointer py-4 lg:py-8"
                    @click="open.includes({{ $index }}) ? open = open.filter(i => i !== {{ $index }}) : open.push({{ $index }})">
                    <div class="flex-1">
                        <h2 class="text-base lg:text-xl text-primary font-semibold font-body mb-0">
                            {{ .title | safeHTML }}
                        </h2>
                    </div>
                    <div class="w-[16px] flex-none text-primary pt-1">
                        <svg class="w-[12px] lg:w-[15px]" :class="{'-rotate-180': open.includes({{ $index }}) }"
                            xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
                            <path fill="currentColor"
                                d="M201.4 374.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 306.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z" />
                        </svg>
                    </div>
                </div>
                <div class="content-accordion text-sm lg:text-lg text-black font-body leading-[1.3] pb-6 xl:pb-8"
                    x-show="open.includes({{ $index }})" x-collapse class="p-3 lg:p-4 text-gray-700">
                    {{ .content | markdownify }}
                </div>
            </div>
            {{- end }}
        </div>
        <div class="text-center text-black text-lg xl:text-xl pt-22 xl:pt-25">
            <p>Have more questions that arenâ€™t in this FAQs? <a class="text-primary font-semibold underline"
                    href="/contact/">Contact us!</a></p>
        </div>
    </div>
</div>
{{- end }}